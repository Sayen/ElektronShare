import{g as y,c as b,a as e,t as d,d as i,i as f,b as x,m as u,v as m,n as h,o as p}from"./index-yE5qE9NP.js";import{a as c}from"./index-B9ygI19o.js";const w={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},k={class:"bg-white shadow rounded-lg p-6"},S={class:"flex items-baseline"},N={class:"text-4xl font-extrabold text-primary"},U={class:"bg-white shadow rounded-lg p-6"},A=["disabled"],C={__name:"PushConsole",setup(M){const n=i({subscribers:0}),s=i({title:"",body:"",url:"/"}),o=i(!1),a=i(""),v=async()=>{try{const l=await c.get("/api/push.php?action=stats");n.value=l.data}catch{n.value={subscribers:42}}},g=async()=>{if(!(!s.value.title||!s.value.body)){o.value=!0,a.value="";try{const l=await c.post("/api/push.php?action=broadcast",s.value);l.data.success?(a.value=`Nachricht erfolgreich an ${l.data.sent_count} Abonnenten gesendet.`,s.value={title:"",body:"",url:"/"}):a.value="Fehler beim Senden: "+l.data.error}catch{a.value="Netzwerkfehler."}finally{o.value=!1}}};return y(v),(l,t)=>(p(),b("div",w,[e("div",k,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Statistik",-1)),e("div",S,[e("p",N,d(n.value.subscribers),1),t[3]||(t[3]=e("p",{class:"ml-2 text-sm text-gray-500"},"Aktive Abonnenten",-1))]),t[5]||(t[5]=e("div",{class:"mt-6"},[e("h4",{class:"text-sm font-medium text-gray-900"},"Abonnenten-Details"),e("ul",{class:"mt-2 text-sm text-gray-500 list-disc list-inside"},[e("li",null,"Chrome User"),e("li",null,"Mobile User")])],-1))]),e("div",U,[t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Push-Nachricht senden",-1)),e("form",{onSubmit:f(g,["prevent"]),class:"space-y-4"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titel",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>s.value.title=r),required:"",type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-primary focus:border-primary"},null,512),[[m,s.value.title]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nachricht",-1)),u(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.value.body=r),required:"",rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-primary focus:border-primary"},null,512),[[m,s.value.body]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ziel-URL (Optional)",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.value.url=r),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-primary focus:border-primary"},null,512),[[m,s.value.url]])]),a.value?(p(),b("div",{key:0,class:h(["text-sm p-2 rounded",a.value.includes("Fehler")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"])},d(a.value),3)):x("",!0),e("button",{type:"submit",disabled:o.value,class:"w-full bg-primary text-white py-2 px-4 rounded-md hover:bg-primary-dark transition disabled:opacity-50"},d(o.value?"Sende...":"An alle senden"),9,A)],32)])]))}};export{C as default};
